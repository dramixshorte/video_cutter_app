# نظام الإشعارات المتكامل - دليل الاستخدام

## 🎯 الغرض من النظام
نظام إشعارات احترافي يربط تطبيق الإدارة (Admin) بتطبيق المستخدمين، مع عرض إشعارات منبثقة مثل TikTok وYouTube وFacebook.

## 🔥 كيفية العمل

### 1. في تطبيق الإدارة (Admin App)
- اذهب إلى شاشة إدارة المسلسلات
- ستجد جرس أخضر بجانب كل مسلسل
- اضغط على الجرس لإرسال إشعار لجميع المستخدمين

### 2. في تطبيق المستخدمين (User App)
عندما يصل الإشعار سيحدث التالي:

#### أ) التطبيق مفتوح (Foreground):
- سيظهر إشعار منبثق احترافي في أعلى الشاشة
- الإشعار يشبه إشعارات TikTok/YouTube
- يحتوي على صورة المسلسل + العنوان + الوصف
- زر "شاهد الآن" للانتقال مباشرة للمسلسل
- الإشعار يختفي تلقائياً بعد 5 ثواني

#### ب) التطبيق مغلق أو في الخلفية:
- سيظهر إشعار نظام Android/iOS عادي
- عند الضغط عليه ينقل المستخدم مباشرة للمسلسل

## 🛠️ المكونات التقنية

### التطبيق الإداري:
- `SeriesManagementScreen.dart` - شاشة إدارة المسلسلات
- الجرس الأخضر يرسل طلب POST إلى API

### API الخادم:
- `api.php` - دالة `sendNotification()`
- يستخدم Firebase Cloud Messaging
- يرسل للموضوع: `all_users`

### تطبيق المستخدمين:
- `fcm_notification_service.dart` - معالجة الإشعارات
- `series_notification_overlay.dart` - الإشعار المنبثق الاحترافي
- يشترك في موضوع `all_users` عند بدء التطبيق

## 🎨 المميزات
- ✅ إشعارات منبثقة احترافية مثل TikTok/YouTube
- ✅ انتقال مباشر للمسلسل عند الضغط
- ✅ يعمل سواء كان التطبيق مفتوح أو مغلق
- ✅ تصميم جذاب بالألوان والظلال
- ✅ اختفاء تلقائي للإشعار
- ✅ دعم الصور في الإشعارات

## 🚀 التشغيل
1. تأكد من تشغيل كلا التطبيقين
2. في تطبيق الإدارة: اضغط الجرس الأخضر
3. في تطبيق المستخدمين: ستشاهد الإشعار المنبثق فوراً!

## 🔧 الإعدادات المطلوبة
- Firebase Project مُعدّ بشكل صحيح
- firebase-service-account.json في مجلد App/
- الاشتراك في topic: `all_users` في كلا التطبيقين